<!DOCTYPE html>
<html lang="en" ng-app="CatanBoardGenerator">
  
  <head>
    <title>Catan Board Generator</title>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

   	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
   	<link rel="stylesheet" type="text/css" href="main.css" media="screen" />

   	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
   	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

  </head>
  
  <body ng-controller="MainController">
  	<div class="container mainContainer">
  		<div class="row">
		    <h1 class="col-sm-8">Generate Board</h1>
		    <div class="col-sm-4">
			    <button type="button" class="btn btn-default">Home</button>
			    <button type="button" class="btn btn-default">Generate</button>
			</div>
		</div>
		<hr>

		<div class="row">
		    <form ng-submit="generateBoard()">
		    	<div class="radio">
				  <label><input type="radio" ng-model="board.type" value="normal" name="normal">Normal (3-4)</label>
				  <label><input type="radio" ng-model="board.type" value="expansion" name="normal">Expansion (5-6)</label>
				</div>

			    <h4> Scramble Key: </h4>
			    <input type="text" ng-model="board.key"></input>
			    <input type="submit" id="submit" value="Submit" />
			</form>
		</div>

		<div>
		    <p ng-if="board.type == 'normal'" ng-repeat="(key,value) in normalTokens track by $index" style="margin:0px">
		    	{{key}} - {{value}} - {{deck[$index]}}
		    </p>

		     <p ng-if="board.type == 'expansion'" ng-repeat="(key,value) in expansionTokens track by $index" style="margin:0px">
		    	{{key}} - {{value}} - {{deck[$index]}}
		    </p>
		</div>
	</div>
  </body>
 

<script>
  var app = angular.module('CatanBoardGenerator', []);

	app.controller('MainController', function($scope) {
	 	
	 	//Board Configuration
	 	$scope.board = {
	 		key: null,
	 		type: 'normal',
	 	}
	 	//The tokens for a normal 3-4 game
	 	$scope.normalTokens = {
	 		'A': 5,
	 		'B': 2,
	 		'C': 6,
	 		'D': 8,
	 		'E': 3,
	 		'F': 10,
	 		'G': 9,
	 		'H': 12,
	 		'I': 11,
	 		'J': 4,
	 		'K': 8,
	 		'L': 10,
	 		'M': 9,
	 		'N': 4,
	 		'O': 5,
	 		'P': 6,
	 		'Q': 3,
	 		'R': 11,
	 	}
	 	//The tokens for the expansion 5-6 game
	 	$scope.expansionTokens = {
	 		'A': 2,
	 		'B': 5,
	 		'C': 4,
	 		'D': 6,
	 		'E': 3,
	 		'F': 9,
	 		'G': 8,
	 		'H': 11,
	 		'I': 11,
	 		'J': 10,
	 		'K': 6,
	 		'L': 3,
	 		'M': 8,
	 		'N': 4,
	 		'O': 8,
	 		'P': 10,
	 		'Q': 11,
	 		'R': 12,
	 		'T': 5,
	 		'V': 9,
	 		'W': 5,
	 		'X': 9,
	 		'Y': 12,
	 		'Za': 3,
	 		'Zb': 2,
	 		'Zc': 6,
	 	}

	 	$scope.generateBoard = function () {
	 		console.log('Board',$scope.board);

	 		//Reset the Deck
	 		$scope.deck = [];

	 		//Build Deck
	 		switch ($scope.board.type) {
	 			case 'normal':
	 				$scope.addToDeck(3,'Brick');
				 	$scope.addToDeck(3,'Ore');
				 	$scope.addToDeck(4,'Wood');
				 	$scope.addToDeck(4,'Sheep');
				 	$scope.addToDeck(4,'Wheat');
	 			break;

	 			case 'expansion':
	 				$scope.addToDeck(4,'Brick');
				 	$scope.addToDeck(4,'Ore');
				 	$scope.addToDeck(6,'Wood');
				 	$scope.addToDeck(6,'Sheep');
				 	$scope.addToDeck(6,'Wheat');
	 			break;

	 			default:
	 			break;
	 		}

	 		//Scramble Deck
			$scope.scrambleDeck($scope.board.key);
	 	}

	 	$scope.addToDeck = function (count,resource) {
	 		for (var x = 0; x<count; x++) {
	 			$scope.deck.push(resource);
	 		}
	 	}

	 	$scope.scrambleDeck = function (key) {
	 		console.log('Scramble Key',key);

	 		var j, x, i;
		    for (i = $scope.deck.length; i; i--) {
		        j = Math.floor(Math.random() * i);
		        x = $scope.deck[i - 1];
		        $scope.deck[i - 1] = $scope.deck[j];
		        $scope.deck[j] = x;
		    }
	 	}

	 	

	});
</script>

</html>